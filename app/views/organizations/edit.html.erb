<div class="remodal-bg">
  <%= render 'organizations/organization_banner', settings: true %>

  <div class="d-md-flex gutter-md">
    <div class="col-md-3">
      <div class="my-3">
        <%= render partial: 'organizations/side_menu' %>
      </div>
    </div>
    <div class="col-md-9">
      <div class="Subhead mt-3">
        <h1 class="Subhead-heading"><%= t('views.organizations.profile_information') %></h1>
      </div>
      <div>
        <%= form_for current_organization, url: { action: :update } do |f| %>
          <%= render 'shared/error_messages', object: f.object %>
          <dl class="form">
            <dt class="mb-2"><%= f.label :title %></dt>
            <dd><%= f.text_field :title, class: 'textfield form-control col-12 col-md-6' %></dd>
          </dl>
          <%= f.submit t('views.organizations.save_changes'), class: 'btn btn-primary' %>
        <% end %>
      </div>

      <div class="Subhead mt-6">
        <h1 class="Subhead-heading"><%= t('views.organizations.lms_integration') %></h1>
      </div>
      <div class="mb-6">
        <% if current_organization.lti_configuration %>
          <%= render partial: "orgs/lti_configurations/lti_details" %>
        <% elsif current_organization.google_course_id %>
          <%= render partial: "google_classroom" %>
        <% else %>
          <%= render partial: "new_lms"%>
        <% end %>
      </div>

      <div class="boxed-group dangerzone">
        <h3><%= t('views.organizations.danger_zone') %></h3>
        <div class="boxed-group-inner">
          <ul>
            <% if current_organization.lti_configuration %>
              <li class="Box-row">
                <div class="details-reset details-overlay">
                  <%= button_to "Delete "+current_organization.lti_configuration.lms_name, lti_configuration_path, method: :delete, class: "btn btn-danger boxed-action"%>
                </div>
                <strong>Delete <%= current_organization.lti_configuration.lms_name %></strong>
                <p>Removing <%= current_organization.lti_configuration.lms_name %> will not remove any students and assignments from GitHub Classoom.</p>
              </li>
            <% elsif current_organization.google_course_id %>
              <li class="Box-row">
                <div class="details-reset details-overlay">
                  <%= button_to "Delete Google Classroom", unlink_google_classroom_organization_path, method: :patch, class: "btn btn-danger boxed-action"%>
                </div>
                <strong>Delete Google Classroom</strong>
                <p>Removing Google Classroom will not remove any students and assignments from GitHub Classoom.</p>
              </li>
            <% end %>
            <li class="Box-row">
              <div class="details-reset details-overlay">
                <a data-remodal-target="reset-and-remove-organization" class="btn btn-danger boxed-action"><%= t('views.organizations.delete_submit') %>
                </a>
              </div>
              <strong><%= t('views.organizations.delete_title') %></strong>
              <p><%= t('views.organizations.theres_no_going_back') %></p>
            </li>
            <% if archive_classrooms_enabled? %>
              <li class="Box-row">
                <% if current_organization.archived_at %>
                  <div class="details-reset details-overlay">
                    <%= form_for current_organization do |f| %>
                      <%= f.hidden_field :archived, value: false %>
                      <%= f.submit t('views.organizations.unarchive_submit'), class: "btn btn-danger boxed-action" %>
                    <% end %>
                  </div>
                  <strong><%= t('views.organizations.unarchive_title') %></strong>
                  <p><%= t('views.organizations.unarchive_description') %></p>
                <% else %>
                  <div class="details-reset details-overlay">
                    <%= form_for current_organization do |f| %>
                      <%= f.hidden_field :archived, value: true %>
                      <%= f.submit t('views.organizations.archive_submit'), class: "btn btn-danger boxed-action" %>
                    <% end %>
                  </div>
                  <strong><%= t('views.organizations.archive_title') %></strong>
                  <p><%= t('views.organizations.archive_description') %></p>
                <% end %>
              </li>
            <% end %>
          </ul>
      </div>
    </div>
  </div>

  <%= render partial: 'organizations/reset_and_remove_organization_modal' %>
</div>